# ============================================
# Configuración de Render.com
# ============================================
# Este archivo define todos los servicios para Render
# Render lo detectará automáticamente al conectar el repositorio

services:
  # ============================================
  # Backend (Spring Boot)
  # ============================================
  - type: web
    name: cliente-app-backend
    runtime: docker
    dockerfilePath: ./Dockerfile
    region: oregon
    plan: free  # Cambiar a 'starter' o 'standard' en producción
    
    # Variables de entorno
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      
      - key: GEMINI_API_KEY
        sync: false  # Configurar manualmente en dashboard
      
      - key: APP_BASE_URL
        value: https://cliente-app-backend.onrender.com  # Cambiar por tu URL
      
      - key: JAVA_OPTS
        value: -Xmx512m -Xms256m
      
      - key: SERVER_PORT
        value: 8080
      
      - key: APP_UPLOAD_DIR
        value: /opt/render/project/src/uploads/profile-photos
    
    # Health check
    healthCheckPath: /actuator/health
    
    # Comandos de build (Render usa el Dockerfile automáticamente)
    # Build command se ejecuta automáticamente con Docker
    
    # Configuración de auto-deploy
    autoDeploy: true
    
    # Branch para deploy
    branch: main  # o master, según tu repositorio

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 1. Base de Datos:
#    - Se usa la configuración de application.properties (NeonDB)
#
# 2. Variables de entorno sensibles:
#    - GEMINI_API_KEY debe configurarse manualmente en el dashboard
#
# 3. Free tier tiene limitaciones:
#    - El servicio se suspende después de 15 min de inactividad
#    - 750 horas de cómputo por mes

